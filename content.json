{"meta":{"title":"志建","subtitle":"志建博客","description":null,"author":"志建","url":"http://yoursite.com"},"pages":[],"posts":[{"title":"test","slug":"test","date":"2018-04-19T05:55:46.000Z","updated":"2018-04-19T05:58:08.385Z","comments":true,"path":"2018/04/19/test/","link":"","permalink":"http://yoursite.com/2018/04/19/test/","excerpt":"","text":"阿里云ECS-Centos7 部署pptp vpn前言： ​ 公司线上环境都在阿里云上，大部分使用的是VPC网络(相当于内网)，需要连接线上服务器进行管理需要连接vpn进行登录才行。目前公司业务还没那么清晰，各方面也没有进行合理规划的管理，其他一些业务市场的也需要连接vpn，对数据库进行查询，这比较操蛋，但是没办法。只能部署一个vpn。 ​ 常见的VPN服务有：PPTP，L2TP，IPSec，SSL VPN(openvpn)。至于使用哪种，看个人喜好了，没必要去关注哪个牛逼。 部署PPTP环境1234[root@master ~]# uname -r3.10.0-327.el7.x86_64[root@master ~]# cat /etc/redhat-release CentOS Linux release 7.2.1511 (Core) 安装这种功能性的软件就直接yum安装了 1[root@master ~]# yum install ppp pptpd 配置pptp123[root@master ~]# vi /etc/pptpd.conflocalip 172.10.26.1remoteip 172.10.26.128-245 配置pptp用户1234[root@master ~]# vim /etc/ppp/chap-secrets 格式： client(用户名) server(服务) secret(密码) IP addresses(登录获取的ip)Lorne pptpd Lorne*&amp;31026 172.10.26.128 开启内核转发12[root@master ~]# echo &apos;net.ipv4.ip_forward = 1&apos; &gt;&gt; /etc/sysctl.conf [root@master ~]# sysctl -p 配置iptables转发规则1234567[root@master system]# systemctl stop firewalld.service[root@master system]# systemctl disable firewalld.service[root@master system]# yum install iptables-services [root@master ~]# iptables -t nat -A POSTROUTING -s 172.10.26.0/24 -j SNAT --to-source 192.168.1.225[root@master ~]# iptables -A FORWARD -p tcp --syn -s 172.10.26.0/24 -j TCPMSS --set-mss 1356 将mtu包改小些，防止pptp mtu过大导致其他网络服务堵塞[root@master system]# systemctl restart iptables.service[root@master system]# systemctl enable iptables.service 添加DNS1234]# vim /etc/ppp/options.pptpdms-dns 223.5.5.5ms-dns 223.6.6.6 启动pptpd12[root@master system]# systemctl start pptpd[root@master system]# systemctl enable pptpd 客户端连接","categories":[],"tags":[]},{"title":"Hello World","slug":"hello-world","date":"2018-04-19T03:48:47.303Z","updated":"2018-04-19T03:48:47.303Z","comments":true,"path":"2018/04/19/hello-world/","link":"","permalink":"http://yoursite.com/2018/04/19/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}